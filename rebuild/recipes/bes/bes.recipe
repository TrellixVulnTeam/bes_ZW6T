!rebuild.recipe!

package bes ${BES_VERSION}

  requirements
    all: TOOL python_setuptools >= 39.1.0

  steps  
    step_python_egg
    
      shell_flags
        all: --exclude-source-files
        
      install_files
        all: ${REBUILD_BUILD_DIR}/bin/bes_test.py bin/bes_test.py
        all: ${REBUILD_BUILD_DIR}/bin/bes_refactor.py bin/bes_refactor.py
        
      package_test_env
        all: _BES_TEST=${REBUILD_BUILD_DIR}/bin/bes_test.py
        
      skip_binary_third_party_prefix: True

      update_version_tag:
        all: lib/bes/ver.py

      tarball_address
        all: ${BES_REPO} ${BES_TAG} dest=${REBUILD_BUILD_DIR}

      tests
        desktop: test_unit_tests.sh
        desktop: test_version.sh
